# Noridoc: skills

Path: @/plugin/src/installer/features/skills

### Overview

Feature loader that installs skill files to {{skills_dir}}/ from the selected profile directory. Skills are discovered and presented to Claude through a skills list appended to CLAUDE.md by @/plugin/src/installer/features/claudemd/loader.ts. Each profile contains its own complete set of skills in @/plugin/src/installer/features/profiles/config/{profileName}/skills/.

### How it fits into the larger codebase

This feature loader (loader.ts) is registered with @/plugin/src/installer/features/loaderRegistry.ts and executed during installation. It reads skills from @/plugin/src/installer/features/profiles/config/{profileName}/skills/ where {profileName} is determined by config.profile.baseProfile (defaults to senior-swe). The loader copies skill directories to {{skills_dir}}/, stripping the "paid-" prefix from paid skill directories during installation (paid-recall becomes recall). After skills are installed, @/plugin/src/installer/features/claudemd/loader.ts discovers all SKILL.md files, extracts their front matter metadata, and appends a formatted skills list to ~/.claude/CLAUDE.md. This skills list tells Claude what skills are available and when to use them. The loader also configures permissions in ~/.claude/settings.json to grant Claude access to the skills directory. Paid skill scripts are bundled by @/plugin/src/scripts/bundle-skills.ts during the build process, creating standalone executables with all dependencies inlined.

### Core Implementation

The getConfigDir() function (loader.ts:30-40) constructs the path to the profile's skills directory. The installSkills() function (loader.ts:47-104) removes any existing {{skills_dir}}/ directory, creates it fresh, then iterates through entries in the profile's skills directory. For each entry, if it's a file (like docs.md), it's copied directly. If it's a directory starting with "paid-", it's only copied for paid installations (config.installType === 'paid') and the "paid-" prefix is stripped from the destination name. All other directories are copied for all tiers. The configureSkillsPermissions() function (loader.ts:110-146) reads ~/.claude/settings.json, initializes the permissions.additionalDirectories array if needed, and adds the skills directory path to grant Claude access. The validate() function (loader.ts:214-304) checks that {{skills_dir}}/ exists, verifies expected skills from the profile are present (respecting paid/free tier), and confirms the permissions are configured in settings.json.

### Things to Know

Skills are now stored per-profile in @/plugin/src/installer/features/profiles/config/{profileName}/skills/ rather than in a central config/ directory. This means each profile (amol, senior-swe, product-manager) can have a different set of skills, though currently all three profiles contain identical skills. The profile system transition (PR #197) moved skills from @/plugin/src/installer/features/skills/config/{free,paid}/ to the new profile-based structure. Skills discovery happens in @/plugin/src/installer/features/claudemd/loader.ts (not in a SessionStart hook) - the claudeMdLoader uses glob to find all SKILL.md files, extracts their front matter, and builds a skills list message that gets appended to CLAUDE.md. This means the skills list is static (generated at install time) rather than dynamic. Paid skills maintain the "paid-" prefix in the source profile directories but have it stripped during installation, so the installed path is {{skills_dir}}/recall/SKILL.md even though the source is profiles/config/{profile}/skills/paid-recall/SKILL.md. The bundler (bundle-skills.ts) finds paid skills using the pattern build/src/installer/features/profiles/config/\*/skills/paid-\*/script.js and bundles them with esbuild into standalone executables. Currently there are 7 paid skills (paid-recall, paid-memorize, paid-prompt-analysis, paid-read-noridoc, paid-write-noridoc, paid-list-noridocs, paid-sync-noridocs), sourced from the \_paid mixin at @/plugin/src/installer/features/profiles/config/\_mixins/\_paid/skills/. Paid skills call backend APIs via @/plugin/src/api client methods. The skills directory is granted permission access via settings.json rather than requiring manual user approval each session.
